
<!DOCTYPE html>
<html lang="ru">
<head>

	<title>Система администрирования сайта </title>
	
	<meta charset="utf-8" />	
	<link rel="stylesheet" href="/admin/decor/modern/css/styles.css" />
	<link rel="stylesheet" href="/admin/decor/modern/css/calendar.css" />
	<link rel="stylesheet" href="/admin/decor/bootstrap/css/bootstrap.css" />

	<script src="/admin/scripts/jquery-1.6.2.min.js"></script>
	<script src="/admin/editor3/js/jquery-ui-1.8.13.custom.min.js" charset="utf-8"></script>
	<link rel="stylesheet" href="/admin/editor3/css/smoothness/jquery-ui-1.8.13.custom.css" media="screen" charset="utf-8">

	<!-- elRTE -->
	<script src="/admin/editor3/js/elrte.min.js" charset="utf-8"></script>
	<link rel="stylesheet" href="/admin/editor3/css/elrte.min.css" media="screen" charset="utf-8">

	<!-- elRTE translation messages -->
	<script src="/admin/editor3/js/i18n/elrte.ru.js" charset="utf-8"></script>

	<script src="/admin/scripts/decor.js" type="text/javascript"></script>

	
	
</head>

<body>
	
	<!--MAIN-->
	<div class="main">
	
		
		<!--MENU-->
		<div class="menu">
			<div class="logo"><img src="/admin/decor/modern/img/logo.png" alt=""></div>
			
<ul>
<li><a href="/manage"><i class="icon-list-alt icon-white"></i>&nbsp;Структура папок</a></li>
<li><a href="/manage/cattemplate/"><i class="icon-folder-open icon-white"></i>&nbsp;Шаблоны папок</a></li>
<li><a href="/manage/blocktemplate/"><i class="icon-file icon-white"></i>&nbsp;Шаблоны блоков</a></li>
<li><a href="/manage/admindatatypes/"><i class="icon-briefcase icon-white"></i>&nbsp;Типы данных</a></li>
<li><a href="/manage/adminfm/"><i class="icon-picture icon-white"></i>&nbsp;Файловый менеджер</a></li>
<li><a href="/manage/moduleorders/"><i class="icon-barcode icon-white"></i>&nbsp;Заказы</a></li>
<li><a href="/manage/users/"><i class="icon-user icon-white"></i>&nbsp;Пользователи</a></li>
<li><a href="/manage?logout=1" onClick="javascript:return confirm('Завершить сеанс администрирования?');">Выход</a></li>
</ul>

		</div>
		<!--/MENU-->
		
		<!--CONTENT-->		
		<div class="content">
			<h1>Редактирование шаблона блока</h1>
			
			<form action="/manage/blocktemplate/_aedit" method="post" enctype="multipart/form-data" name="form1">
				
				<input type="hidden" name="hide-parent" value="35"/>
			
				
				<div class="block">
					<h2>Основные параметры</h2>
						
					<div class="stroke">
						<div class="name">
							<p>Название</p>						
						</div>
						<div class="value">							
							<input type="text" class="text" name="name" value="Новость"/>
						</div>
					</div>
			
					<div class="stroke">
						<div class="name">
							<p>Ключ</p>						
						</div>
						<div class="value">							
							<input type="text" class="text" name="key" value="news"/>
							<input type="hidden" class="text" name="oldkey" value="news"/>
						</div>
					</div>
					
				</div>
			
				<div class="block longleft">
					<h2>Права доступа</h2>
						
					<div class="stroke">
						<div class="name">
							<p>Право на удаление</p>
						</div>
						<div class="value">
							<input type="checkbox" class="ch" name="candel" value="1" checked="cheked"/>
						</div>
					</div>
			
					<div class="stroke">
						<div class="name">
							<p>Право на редактирование</p>
						</div>
						<div class="value">
							<input type="checkbox" class="ch" name="canedit" value="1" checked="cheked"/>
						</div>
					</div>
			
					<div class="stroke">
						<div class="name">
							<p>Право на создание</p>
						</div>
						<div class="value">
							<input type="checkbox" class="ch" name="canadd" value="1"/>
						</div>
					</div>				
			
					<div class="stroke">
						<div class="name">
							<p>Право на перенос</p>
						</div>
						<div class="value">
							<input type="checkbox" class="ch" name="canmove" value="1"/>
						</div>
					</div>
			
					<div class="stroke">
						<div class="name">
							<p>Право на копирование</p>
						</div>
						<div class="value">
							<input type="checkbox" class="ch" name="cancopy" value="1" checked="cheked"/>
						</div>
					</div>
			
					<div class="stroke">
						<div class="name">
							<p>Право на скрытие/показ</p>
						</div>
						<div class="value">
							<input type="checkbox" class="ch" name="canhide" value="1" checked="cheked"/>
						</div>
					</div>
			
					
				</div>
			
				<div class="block longleft">
					<h2>Отдельные настройки</h2>
			
					<div class="stroke">
						<div class="name">
							<p>Включить SEO</p>
						</div>
						<div class="value">
							<input type="checkbox" class="ch" name="seo" value="1" checked="cheked"/>
							<input type="hidden" name="oldseo" value="1"/>
						</div>
					</div>
			
					<div class="stroke">
						<div class="name">
							<p>Виртуальный блок?</p>
						</div>
						<div class="value">
							<input type="checkbox" class="ch" name="virtual" value="1"/>
						</div>
					</div>
				</div>
			
							
				
				<div class="block" id="addFields">
					<h2>Поля шаблона</h2>
					<table cellspacing="1" cellpadding="0" border="0" width="100%" id="addFieldsTable">
						<tr>						
							<th>Имя</th>
							<th>Ключ</th>
							<th>Тип данных</th>
							<th>По умолчанию</th>
							<th>Служебная информация</th>							
							<th>Сорт.</th>
							<th>R.only</th>
							<th>Отобр.</th>
							<th>Уд.</th>
						</tr>
			
						<tr id="addFields_0" class="addFieldsTr" style="display: none;">						
							<td>
								<input type="text" name="addname[]" value="" class="text"/>
							</td>
							<td>
								<input type="text" name="addkey[]" value="" class="text"/>
							</td>
							<td>
								<select name="addtype[]" class="addtype">
									
										<option value="text" selected="selected">однострочный текст - (text)</option>
									
										<option value="select">выпадающий список с единственным выбором - (select)</option>
									
										<option value="mselect">список с множественным выбором - (mselect)</option>
									
										<option value="checkbox">триггер - (checkbox)</option>
									
										<option value="html">html код - (html)</option>
									
										<option value="file">поле для загрузки файла - (file)</option>
									
										<option value="date">дата - (date)</option>
									
										<option value="items">вложенные блоки - (items)</option>
									
										<option value="mapfrom">Карта сайта от элемента - (mapfrom)</option>
									
										<option value="time">Время - (time)</option>
									
										<option value="counter">Многострочный текст без форматирования - (counter)</option>
									
										<option value="features">Характеристики - (features)</option>
									
								</select>
							</td>
							<td>
								<input type="text" name="adddefault[]" value="" class="text"/>
							</td>
							<td>
								<input type="text" name="addinfo[]" value="" class="text"/>
							</td>							
							<td>
								<input type="text" name="addsort[]" value="" class="text small"/>
							</td>
							<td>
								<input type="checkbox" value="1" class="checkbox-ro" name="addro[]"/>
								<input type="hidden" value="0" name="addroh[]"/>
							</td>
							<td>
								<input type="checkbox" value="1" class="checkbox-ro" name="addshow[]"/>
								<input type="hidden" value="0" name="addshowh[]"/>
							</td>
							<td>
								<a href="#" class="delIcon" onclick="deleteAddField(); return false;"><i class="icon-trash"></i></a>
							</td>						
						</tr>
			
						
						<tr id="curFields_332" class="addFieldsTr">						
							<td>
								<input type="text" name="curname[332]" value="Дата" class="text"/>
							</td>
							<td>
								<input type="text" name="curkey[332]" value="date" class="text"/>
							</td>
							<td>
			
							<select name="curtype[332]" class="addtype">		
								
									<option value="text">однострочный текст - (text)</option>
								
									<option value="select">выпадающий список с единственным выбором - (select)</option>
								
									<option value="mselect">список с множественным выбором - (mselect)</option>
								
									<option value="checkbox">триггер - (checkbox)</option>
								
									<option value="html">html код - (html)</option>
								
									<option value="file">поле для загрузки файла - (file)</option>
								
									<option value="date" selected="selected">дата - (date)</option>
								
									<option value="items">вложенные блоки - (items)</option>
								
									<option value="mapfrom">Карта сайта от элемента - (mapfrom)</option>
								
									<option value="time">Время - (time)</option>
								
									<option value="counter">Многострочный текст без форматирования - (counter)</option>
								
									<option value="features">Характеристики - (features)</option>
								
							</select>
								
							</td>
							<td>
								<input type="text" name="curdefault[332]" value="" class="text"/>
							</td>
							<td>
								<input type="text" name="curinfo[332]" value="" class="text"/>
							</td>							
							<td>
								<input type="text" name="cursort[332]" value="1" class="text small"/>
							</td>
							<td>
								<input type="checkbox" value="1" class="checkbox-ro" name="curro[332]"/>
								<input type="hidden" value="0" name="curroh[332]"/>
							</td>
							<td>
								<input type="checkbox" value="1" class="checkbox-ro" name="curshow[332]" checked="checked"/>
								<input type="hidden" value="1" name="curshowh[332]"/>
							</td>
							<td>
								<a href="#" class="delIcon" onclick="deleteCurField(332); return false;"><i class="icon-trash"></i></a>

							</td>						
						</tr>
						
						<tr id="curFields_333" class="addFieldsTr">						
							<td>
								<input type="text" name="curname[333]" value="Заголовок" class="text"/>
							</td>
							<td>
								<input type="text" name="curkey[333]" value="name" class="text"/>
							</td>
							<td>
			
							<select name="curtype[333]" class="addtype">		
								
									<option value="text" selected="selected">однострочный текст - (text)</option>
								
									<option value="select">выпадающий список с единственным выбором - (select)</option>
								
									<option value="mselect">список с множественным выбором - (mselect)</option>
								
									<option value="checkbox">триггер - (checkbox)</option>
								
									<option value="html">html код - (html)</option>
								
									<option value="file">поле для загрузки файла - (file)</option>
								
									<option value="date">дата - (date)</option>
								
									<option value="items">вложенные блоки - (items)</option>
								
									<option value="mapfrom">Карта сайта от элемента - (mapfrom)</option>
								
									<option value="time">Время - (time)</option>
								
									<option value="counter">Многострочный текст без форматирования - (counter)</option>
								
									<option value="features">Характеристики - (features)</option>
								
							</select>
								
							</td>
							<td>
								<input type="text" name="curdefault[333]" value="" class="text"/>
							</td>
							<td>
								<input type="text" name="curinfo[333]" value="" class="text"/>
							</td>							
							<td>
								<input type="text" name="cursort[333]" value="2" class="text small"/>
							</td>
							<td>
								<input type="checkbox" value="1" class="checkbox-ro" name="curro[333]"/>
								<input type="hidden" value="0" name="curroh[333]"/>
							</td>
							<td>
								<input type="checkbox" value="1" class="checkbox-ro" name="curshow[333]" checked="checked"/>
								<input type="hidden" value="1" name="curshowh[333]"/>
							</td>
							<td>
								<a href="#" class="delIcon" onclick="deleteCurField(333); return false;"><i class="icon-trash"></i></a>

							</td>						
						</tr>
						
						<tr id="curFields_340" class="addFieldsTr">						
							<td>
								<input type="text" name="curname[340]" value="Анонс" class="text"/>
							</td>
							<td>
								<input type="text" name="curkey[340]" value="anons" class="text"/>
							</td>
							<td>
			
							<select name="curtype[340]" class="addtype">		
								
									<option value="text">однострочный текст - (text)</option>
								
									<option value="select">выпадающий список с единственным выбором - (select)</option>
								
									<option value="mselect">список с множественным выбором - (mselect)</option>
								
									<option value="checkbox">триггер - (checkbox)</option>
								
									<option value="html" selected="selected">html код - (html)</option>
								
									<option value="file">поле для загрузки файла - (file)</option>
								
									<option value="date">дата - (date)</option>
								
									<option value="items">вложенные блоки - (items)</option>
								
									<option value="mapfrom">Карта сайта от элемента - (mapfrom)</option>
								
									<option value="time">Время - (time)</option>
								
									<option value="counter">Многострочный текст без форматирования - (counter)</option>
								
									<option value="features">Характеристики - (features)</option>
								
							</select>
								
							</td>
							<td>
								<input type="text" name="curdefault[340]" value="" class="text"/>
							</td>
							<td>
								<input type="text" name="curinfo[340]" value="" class="text"/>
							</td>							
							<td>
								<input type="text" name="cursort[340]" value="3" class="text small"/>
							</td>
							<td>
								<input type="checkbox" value="1" class="checkbox-ro" name="curro[340]"/>
								<input type="hidden" value="0" name="curroh[340]"/>
							</td>
							<td>
								<input type="checkbox" value="1" class="checkbox-ro" name="curshow[340]"/>
								<input type="hidden" value="0" name="curshowh[340]"/>
							</td>
							<td>
								<a href="#" class="delIcon" onclick="deleteCurField(340); return false;"><i class="icon-trash"></i></a>

							</td>						
						</tr>
						
						<tr id="curFields_334" class="addFieldsTr">						
							<td>
								<input type="text" name="curname[334]" value="Текст" class="text"/>
							</td>
							<td>
								<input type="text" name="curkey[334]" value="text" class="text"/>
							</td>
							<td>
			
							<select name="curtype[334]" class="addtype">		
								
									<option value="text">однострочный текст - (text)</option>
								
									<option value="select">выпадающий список с единственным выбором - (select)</option>
								
									<option value="mselect">список с множественным выбором - (mselect)</option>
								
									<option value="checkbox">триггер - (checkbox)</option>
								
									<option value="html" selected="selected">html код - (html)</option>
								
									<option value="file">поле для загрузки файла - (file)</option>
								
									<option value="date">дата - (date)</option>
								
									<option value="items">вложенные блоки - (items)</option>
								
									<option value="mapfrom">Карта сайта от элемента - (mapfrom)</option>
								
									<option value="time">Время - (time)</option>
								
									<option value="counter">Многострочный текст без форматирования - (counter)</option>
								
									<option value="features">Характеристики - (features)</option>
								
							</select>
								
							</td>
							<td>
								<input type="text" name="curdefault[334]" value="" class="text"/>
							</td>
							<td>
								<input type="text" name="curinfo[334]" value="" class="text"/>
							</td>							
							<td>
								<input type="text" name="cursort[334]" value="4" class="text small"/>
							</td>
							<td>
								<input type="checkbox" value="1" class="checkbox-ro" name="curro[334]"/>
								<input type="hidden" value="0" name="curroh[334]"/>
							</td>
							<td>
								<input type="checkbox" value="1" class="checkbox-ro" name="curshow[334]"/>
								<input type="hidden" value="0" name="curshowh[334]"/>
							</td>
							<td>
								<a href="#" class="delIcon" onclick="deleteCurField(334); return false;"><i class="icon-trash"></i></a>

							</td>						
						</tr>
						
						<tr id="curFields_350" class="addFieldsTr">						
							<td>
								<input type="text" name="curname[350]" value="Фото" class="text"/>
							</td>
							<td>
								<input type="text" name="curkey[350]" value="photo" class="text"/>
							</td>
							<td>
			
							<select name="curtype[350]" class="addtype">		
								
									<option value="text">однострочный текст - (text)</option>
								
									<option value="select">выпадающий список с единственным выбором - (select)</option>
								
									<option value="mselect">список с множественным выбором - (mselect)</option>
								
									<option value="checkbox">триггер - (checkbox)</option>
								
									<option value="html">html код - (html)</option>
								
									<option value="file" selected="selected">поле для загрузки файла - (file)</option>
								
									<option value="date">дата - (date)</option>
								
									<option value="items">вложенные блоки - (items)</option>
								
									<option value="mapfrom">Карта сайта от элемента - (mapfrom)</option>
								
									<option value="time">Время - (time)</option>
								
									<option value="counter">Многострочный текст без форматирования - (counter)</option>
								
									<option value="features">Характеристики - (features)</option>
								
							</select>
								
							</td>
							<td>
								<input type="text" name="curdefault[350]" value="" class="text"/>
							</td>
							<td>
								<input type="text" name="curinfo[350]" value="resize:64x200x98,192x300x98" class="text"/>
							</td>							
							<td>
								<input type="text" name="cursort[350]" value="5" class="text small"/>
							</td>
							<td>
								<input type="checkbox" value="1" class="checkbox-ro" name="curro[350]"/>
								<input type="hidden" value="0" name="curroh[350]"/>
							</td>
							<td>
								<input type="checkbox" value="1" class="checkbox-ro" name="curshow[350]"/>
								<input type="hidden" value="0" name="curshowh[350]"/>
							</td>
							<td>
								<a href="#" class="delIcon" onclick="deleteCurField(350); return false;"><i class="icon-trash"></i></a>

							</td>						
						</tr>
						
					</table>
				</div>		
			
				
				
				
			
				<div class="buttons">				
					<input type="submit" class="btn btn-success" name="add" value="Сохранить">				
					<input type="button" class="btn btn-danger" value="Отмена" onclick="javascript:location.href='/manage/blocktemplate/'; return false;">
					<input type="button" class="btn btn-primary" value="Добавить поле" onclick="addField();">
				</div>
			
			</form>
		</div>
		<!--/CONTENT-->

		<script>

			$(".checkbox-ro").change(function() {
				if ($(this).attr("checked")) {
					$(this).next().val("1");
				}
				else {
					$(this).next().val("0");
				}
					
			});

			var fi = 5;

			function addField() {				
				fi ++;				
				var newitem = $("#addFields_0").clone();				
				newitem.find('a.delIcon').attr("onclick", "deleteAddField("+fi+"); return false;");
				newitem.appendTo("#addFieldsTable").attr("id", "addFields_"+fi).show();
				$("#addFields").show();
				
				var i = 0;

				/*Значения поля sort*/
				$("input.small").each(function() {
					$(this).val(i);
					i ++;
				});
				
				$(".checkbox-ro").change(function() {
					if ($(this).attr("checked")) {
						$(this).next().val("1");
					}
					else {
						$(this).next().val("0");
					}
						
				});
			}

			function deleteAddField(id) {
				if (confirm("Удалить поле?")) {
					fi --;
					$("#addFields_"+id).remove();
					if (fi == 0) {
						$("#addFields").hide();
					}
					/*Значения поля sort*/
					var i = 0;
					$("input.small").each(function() {
						$(this).val(i);
						i ++;
					});
					return false;
				}
				else {
					return false;
				}
			}

			function deleteCurField(id) {
				if (confirm("Удалить поле?")) {
					fi --;
					$("#curFields_"+id).remove();
					if (fi == 0) {
						$("#addFields").hide();
					}
					/*Значения поля sort*/
					var i = 0;
					$("input.small").each(function() {
						$(this).val(i);
						i ++;
					});
					return false;
				}
				else {
					return false;
				}
			}
		</script>
	
									
									
									
	</div>
	<!--/MAIN-->						




</body>
</html>		
